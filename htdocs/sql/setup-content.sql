-- CREATE DATABASE IF NOT EXISTS kmom04;
use maaa16;

-- show tables;

-- Ensure UTF8 as chacrter encoding within connection.
SET NAMES utf8;

--
-- Create table for Content
--
DROP TABLE IF EXISTS `content`;
CREATE TABLE `content`
(
  `id` INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
  `path` CHAR(120) UNIQUE,
  `slug` CHAR(120) UNIQUE,
  `title` VARCHAR(120),
  `data` TEXT,
  `type` CHAR(20),
  `filter` VARCHAR(80) DEFAULT NULL,
  `status` CHAR(20) DEFAULT 'notPublished',

  -- MySQL version 5.6 and higher
  -- `published` DATETIME DEFAULT CURRENT_TIMESTAMP,
  -- `created` DATETIME DEFAULT CURRENT_TIMESTAMP,
  -- `updated` DATETIME DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
 
  -- MySQL version 5.5 and lower
  `published` DATETIME DEFAULT NULL,
  `created` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated` DATETIME DEFAULT NULL, --  ON UPDATE CURRENT_TIMESTAMP,
  `deleted` DATETIME DEFAULT NULL

) ENGINE INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci;

INSERT INTO `content` (`path`, `slug`, `type`, `title`, `data`, `filter`) VALUES
    ("hem", null, "page", "Hem", "Detta är min hemsida. Den är skriven i [url=http://en.wikipedia.org/wiki/BBCode]bbcode[/url] vilket innebär att man kan formattera texten till [b]bold[/b] och [i]kursiv stil[/i] samt hantera länkar.\n\nDessutom finns ett filter 'nl2br' som lägger in <br>-element istället för \\n, det är smidigt, man kan skriva texten precis som man tänker sig att den skall visas, med radbrytningar.", "bbcode,nl2br"),
    ("om", null, "page", "Om", "Detta är en sida om mig och min webbplats. Den är skriven i [Markdown](http://en.wikipedia.org/wiki/Markdown). Markdown innebär att du får bra kontroll över innehållet i din sida, du kan formattera och sätta rubriker, men du behöver inte bry dig om HTML.\n\nRubrik nivå 2\n-------------\n\nDu skriver enkla styrtecken för att formattera texten som **fetstil** och *kursiv*. Det finns ett speciellt sätt att länka, skapa tabeller och så vidare.\n\n###Rubrik nivå 3\n\nNär man skriver i markdown så blir det läsbart även som textfil och det är lite av tanken med markdown.", "markdown"),
    ("blogpost-1", "valkommen-till-min-blogg", "post", "Välkommen till min blogg!", "Detta är en bloggpost.\n\nNär det finns länkar till andra webbplatser så kommer de länkarna att bli klickbara.\n\nhttp://dbwebb.se är ett exempel på en länk som blir klickbar.", "link,nl2br"),
    ("blogpost-2", "nu-har-sommaren-kommit", "post", "Nu har sommaren kommit", "Detta är en bloggpost som berättar att sommaren har kommit, ett budskap som kräver en bloggpost.", "nl2br"),
    ("blogpost-3", "nu-har-hosten-kommit", "post", "Nu har hösten kommit", "Detta är en bloggpost som berättar att sommaren har kommit, ett budskap som kräver en bloggpost", "nl2br");
     
INSERT INTO content (path, slug, type, title, data, filter, status, published) VALUES ('fiska', 'fiska', 'page', 'Nattfiske','Att fiska i natten\n-------------\nDenna sida handlar om nattfiske\n\nDet finns gott om fisk att fånga om man har rätt utrustning och teknik.\n\n####Utrusting\n* Drag\n* Klädsel', 'markdown', 'Published', NOW());
INSERT INTO content (path, slug, type, title, data, filter, status, published) VALUES ('ardennerpost', 'enemy-action-ardenner', 'post', 'Enemy Action - Ardennes','###Tabletop simulator\n\nNu har jag äntligen fått klart en tabletopsimulatormodul för EA - Ardennes. Dock inte alla tre spellägena. Allierad solo kvarstår.\n\n![ardenner](http://i.imgur.com/0HUJNGT.png "Logo Title Text 1")', 'markdown', 'Published', NOW());
INSERT INTO content (path, slug, type, title, data, filter, status, published) VALUES ('tagluffpost', 'tagluff', 'post', 'Tågluff','###Tågluffa i Europa\n\nDet är mycket jobb innan, med planering och bokningar. Men det är samtidigt ett äventyr. Framför allt för barnen.\n\nI sommar bär det iväg.', 'markdown', 'Published', NOW());
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES ('', 'info', 'info', '####Textblock\r\n\r\n###INFORMATION\r\n\r\nFrån [url=https://sv.wikipedia.org/wiki/Information]Wikipedia[/url]:\r\n\r\n[b]Information[/b] uttrycker [kunskap](https://sv.wikipedia.org/wiki/Kunskap) eller budskap i en konkret form, och består ofta men inte alltid av en samling [fakta](https://sv.wikipedia.org/wiki/Faktum). Information utgör substans[innehållet](https://sv.wikipedia.org/wiki/Inneh%C3%A5ll) i de meddelanden som överförs vid [kommunikation](https://sv.wikipedia.org/wiki/Kommunikation) och utgör också substansinnehållet i olika typer av lager av kunskap och budskap, som en [bok](https://sv.wikipedia.org/wiki/Bok) eller [databas](https://sv.wikipedia.org/wiki/Databas).\r\n\r\nInformation återfinns som substansinnehållet vid användning av [tal](https://sv.wikipedia.org/wiki/Tal_(spr%C3%A5k)), [skrift](https://sv.wikipedia.org/wiki/Skrift), [symboler](https://sv.wikipedia.org/wiki/Symbol), [bilder](https://sv.wikipedia.org/wiki/Bild) och som kodat [data](https://sv.wikipedia.org/wiki/Data_(representation)) anpassat för specifika media som [datorer](https://sv.wikipedia.org/wiki/Dator).\r\n\r\nOrdagrant härstammar ordet från latinets informare vilket skulle ge betydelsen ”att ge form (åt)” eller ”utforma”.', 'block', 'markdown,bbcode', 'Published', NOW());
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'lista', 'dbmodelleringslista', '####Listblock\r\n\r\nDatabasmodelleringens 10 steg\r\n\r\n1. [b]Konceputell[/b]\r\n  * Beskriv databasen i ett textstycke.\r\n  * Skriv ned alla entiteter.\r\n  * Skriv ned alla relationer och visa i matris.\r\n  * Rita enkelt ER-diagram med entiteter och relationer.\r\n  * Komplettera ER-diagram med kardinalitet.\r\n  * Komplettera ER-diagram med alla attribut samt kandidatnycklar.\r\n2. [b]Logisk[/b]\r\n  * Modifiera ER-diagram enligt relationsmodellen.\r\n  * Utöka ER-diagram med primära/främmande nycklar samt kompletterande attribut.\r\n3. [b]Fysisk[/b]	\r\n  * Skapa SQL DDL för tabellerna.\r\n  * Lista funktioner som databasen skall stödja (API).', 'block', 'markdown,bbcode', 'Published', NOW());
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'progbild', 'progbild', '####Bildblock\r\n\r\n![size_50](https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSdzQks1G8Lp2Pfqt8d8UkU2nuoeWZWO0KYHyoP8csmBx7T6jatog)\r\n\r\n[i]Bild som är fri att användas.[/i]', 'block', 'markdown,bbcode', 'Published', NOW());
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'kmom04', 'Redovisning kmom04', '##Kmom04\r\n\r\nNu är jag helt slut. Detta var ännu en mastodontuppgift. Familjen börjar undra var jag tagit vägen.\r\n\r\nMen det har varit ett kul och utmanande kursmoment och jag hoppas att jag fick med allt och lite till.\r\n\r\n###Finns något att säga kring din klass för textfilter, eller rent allmänt om formattering och filtrering av text som sparas i databasen av användaren?\r\nDetta var en rolig och utmanande del att göra och utan regex101 till hjälp hade jag nog gått bet.\r\n\r\nAnvändaren får möjlghet att lägga in text via bloggen. Då kan användaren välja filter via checkbox, men inte ordning. Detta för att få den bästa ordningen av de valen som gjorts. Man kan även förhandsgranska för att se vad de valda filtren gör med texten.\r\n\r\n###Berätta hur du tänkte när du strukturerade klasserna och databasen för webbsidor och bloggposter?\r\nJag gjorde en klass som har hjälpfunktioner till detta - Content. Den ser till att slug alltid är unikt genom att lägga till -2, -3 eller vad som krävs efter slugnamnet om så behövs. Den ser även till att kontrollera path att den sätts till null om så behövs.\r\n\r\nDet är en admin som har kontrollen via adminsidan och kan lägga till, redigera eller ta bort. Det är bara admin som kan skapa nya sidor och block. Medan både användaren och admin kan skapa bloggposter.\r\n\r\nJag valde att lägga till möjlighet för admin att publisera eller ickepublicera en post, page eller block. Det kommer inte synas för en användare om det inte är publiserat. Default läget när användaren lägger till en bloggpost är att det är publiserat. Men admin måste publisera efter tillägg för att det skall synas. Admin har däremot möjlighet att se pages även om de inte är publiserade via adminsidan.\r\n\r\n\r\n###Förklara vilka routes som används för att demonstrera funktionaliteten för webbsidor och blogg (så att en utomstående kan testa).\r\nRouten för page är helt enkelt page och för blog är det blog. Man kan se hur blocks fungerar via routen blocktest. Men allt finns även i dropdown-menyn \'Uppgifter\'.\r\n\r\n###Hur känns det att dokumentera databasen så här i efterhand?\r\nGillade verkligen hur smidigt det var att få till diagrammet med reverse engineering. Förstår att det finns stor vinning med detta när det börjar bli stort och invecklat och även efter att det gått viss tid och man vill få kolla på läget igen. \r\n\r\nDäremot ville det sig inte helt med data exporten av koden. Fick skumma felmeddelanden i sql-filen.\r\n\r\n###Om du är självkritisk till koden du skriver i Anax Lite, ser du förbättringspotential och möjligheter till alternativ struktur av din kod?\r\nJa, absolut. Framför allt vet jag att mitt sätt att få till stilen inte är optimal. Men det är det bästa jag kommit på så här långt. Nu skickar jag med path via route till headern för varje route som skapas. Blir lite omständigt och jag märker att det ställer till det med att bilder inte alltid syns i vissa lägen.\r\n\r\nSen finns det säker mer. Men det är vad jag kan komma på på rak arm.\r\n', 'block', 'markdown,bbcode', 'Published', '2017-04-23 17:30:26');
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'kmom05', 'Redovisning kmom05', '##kmom05\r\n###Gick det bra att komma igång med det vi kallar programmering av databas, med transaktioner, lagrade procedurer, triggers, funktioner?\r\nJa, det tycker jag. Boken och exemplen var till god hjälp för att få till delarna i sqlsciptet. Däremot var det inte helt lätt att sedan använda CALL i php för att få nytta av prodecuren. Det tog många timmar innan jag fick det att fungera. \r\n\r\n###Hur är din syn på att programmera på detta viset i databasen?\r\nJag gillar idén att låta databasen sköta de delarn som är möjligt självmant. Så som jag gjorde att när status för en order ändras från notDelivered till delivered så skapas en faktura baserat på ordern.\r\n\r\nJag tycker också om möjligheten att kunna, via procedurer, slå samman förlopp och att man kan göra flera steg säkert pga commit/rollback. Använder detta för att, när man skapar en ny produkt, koppla samman produkt och katalog. Därmed räcker det med ett CALL för att kunna skapa produkt som inte finns med kategori som är ny, till att lägga till produkt som existerar fast med ny kategori. Har man väl gjort jobbet att fixa en bra procedur kan man ha mycket vinning av det senare. \r\n\r\n###Några reflektioner kring din kod för backenden till webbshopen?\r\nJag använde exempelkoden som grund och har sedan ändrat och lagt till. Ville gärna ha fått med en kundvagn också. Men tiden rinner iväg och jag valde att begränsa mig lite för att få till ett bra gränssnitt till de andra delarna istället.\r\n\r\nTror jag börjar förstå hur det hela kan hänga ihop med relationer mellan tabeller. Valde att ha ett lager uppdelat i lagersektioner, hyllsektioner och hyllrader. Mest för att se om jag kunde fixa det och om jag verkligen förstått. Tycker att det blev rätt så överblickbart och kom att passa väl in i gränssnittet när man skall placera ut produkter på en hyllrad. Kul och lärorikt.\r\n\r\nSom det är nu kan man inte lägga till kunder eller skapa ny order. Tänker att det är sådant som görs av kunden självt.\r\n\r\n\r\n###Något du vill säga om koden generellt i och kring Anax Lite?\r\nBara att det blivit väldigt mycket och att man lätt kan se vinsten av uppdelning när det växer sig stort. Det blir extra viktigt att ha ordning på allt då, såklart.\r\n', 'block', 'markdown', 'Published', '2017-05-04 09:48:06');
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'kmom06', 'Redovisning kmom06', '##Kmom06\r\n\r\nDet är tydligt att phpunit och Cygwin inte riktigt går ihop. Hade strul att få det att fungera, när jag skulle testa i Anax-lite. Men tillslut löste det sig och även testernna kom på plats.\r\n\r\nDet känns verkligen att kursen tagit med mycket och gått både på djupet och på bredden. Det var skönt att äntligen kunna lämna in redovisningen för sista kursmomentet och mentalt börja ladda för kmom07/10.\r\n\r\n###Vad du bekant med begreppet index i databaser sedan tidigare?\r\nInte på det sättet som vi använt det nu. Kände inte till att man kunde kolla hur stor sökningen var och att man med EXPLAIN kunde få ner sökningsområdet och optimera. Det ver inte alls dumt att få se och lära om det här. Det blir ju väldigt viktigt när databasen är stor - att få den så snabbarbetad som möjligt.\r\n\r\n###Berätta om hur du jobbade i uppgiften om index och vilka du valde att lägga till och skillnaden före/efter.\r\nJag valde att lägga index i tre tabeller; content (som innehåller posts, pages och block), accounts (som har användarna) och ShelfSection (som är en hyllsektion i lagret). Två av dem, ShelfSection och content valde jag att indexera en kolumn i vardera; description (beskrivning/namnet på hyllsectionen) respektive title (titel på content). Båda dessa sänkte antalet rader från full tabellsökning till enbart en rad. I den tredje tabellen, accounts, skapades ett unique index på email då dessa inte skall kunna vara dubbletter. Därmed gick sökning på email i accounts från full tabellsökning till en rad.\r\n\r\nJag tyckte index på dessa ställen var rimliga då det kan vara vanliga kolumnet att söka i och vad gäller email kändes det naturligt att begränsa till unique även för att det inte skall gå att lägga in två konton med samma email.\r\n\r\n###Har du tidigare erfarenheter av att skriva kod som testar annan kod?\r\nLite grann sedan tidigare kurser - i Python. Men inte mer än så.\r\n\r\n###Hur ser du på begreppet enhetstestning och att skriva testbar kod?\r\nDet är en trygghet att kunna testa så att det fungerar som tänkt och är något som jag kommer att ha med mig i fortsättningen när jag skriver klasser. Att se till att få med bitar som gör det lätt att via phpunit kontrollera funktionaliteten.\r\n\r\nKan tänka mig att man som utvecklare inte använder sin produkt på samma vis som användaren alla gånger. Därmed riskerar fel att följa med som inte upptäckts på grund av det. Med tester kan man säkerligen komma åt fler av dem än man gjort annars.\r\n\r\n###Hur gick det att hitta testbar kod bland dina klasser i Anax Lite?\r\nAtt göra testen för makeGuess var inga större problem. Men när jag skulle till att testa i Anax-lite så ville det inte längre. Jag kunde, på grund av Cygwin, inte använda make-kommandot vilket gjode det lite rörigt. Sen fick jag kostiga fel, som att den klagade på en fil som inte ens testades.\r\n\r\nNär jag väl fick det att fungera blev det test skrivet för enbart en av klasserna. Men kodtäckningen för den klassen blev 100%.\r\n\r\nKlassen jag valde var Textfilterklassen, som jag tidigare tänkt, skulle vara toppen om man kunde testa. När jag skrev den klassen valde jag att i brist på annat att kunna förhandsgranska hur det blev i browsern. Så, i och med detta, kändes det som ett naturligt val. Med phpunit blir det så mycket lättare och mer effektivare att testa klassen. Inte heller helt fel att kunna lägga in fler delar efterhand i testmetoderna, efterhand som man kommer på nytt eller lägger till fler delar som skall testa.\r\n', 'block', 'markdown', 'Published', '2017-05-24 18:04:29');
INSERT INTO content (path, slug, title, data, type, filter, status, published) VALUES (NULL, 'kmom10', 'Redovisning kmom10', '##Kmom10\r\n \r\n###Krav 1: Struktur och innehåll\r\nDet finns en produktsida - ‘Butik’ som visar alla produkter till salu. Det är enbart spel som satts till “displayed” som visas utåt mot kund, på denna sidan och förstasidan.\r\n \r\nNyhetssidan är en vanlig bloggsida med nyheter efter inläggningsdatum. Det finns 7 st inlagda nyhetsposter. Klickar man rubrik så kommer man till sida som visar enbart den nyhetsposten. Dessa skapas som administratör under Innehåll->lägg till innehåll och är av typen ‘post’. Dessa visas sedan även på första sidan. Men mer om den längre ner.\r\n \r\nOm sidan visar kortfattad information kring folket bakom butiken och även kontaktinformation. Den är skapad som en typ ‘page’ och kan redigeras som administratör under länken Innehåll.\r\n \r\nDet finns en gemensam header och footer. Navbaren finns i två varianter. En för kunden och en för administratören när den går in i det läget. Detta styrs via navbarens configfil och routern.\r\n \r\nFootern innehåller information om mig, företaget och BTH samt vilken kursen är. Detta kommer från innehåll av typen block med namnen ‘leftfooter’, ‘middlefooter’ och ‘rightfooter’ och kan därmed ändras via admingränssnittet.\r\n \r\nDet finns även annat innehåll av typen block, så som ‘checka ut’-info, ‘orderreview’, ‘fraktinformation’, ‘erbjudande’ samt ‘rekommenderade’.\r\n \r\nSom administratör kan man via adminpage hantera innehåll; nyhetsblogg, block som är delar av en sida, page som är hela sidor samt lägga till och redigera produkter. Men även användarkonton och webshopen. Man har möjlighet att lägga till/ta bort användare/innehåll/användare. Man kan lägga till varor till lagret, se ordrar och fakturor. Sätta ordrar till skickade/ej skickade och fakturor till betalade/ej betalade.\r\n \r\nNär man lägger in innehåll har man möjlighet att förhandsgranska och därmed testa så man har rätt filter eller att man hanterar filterna på rätt sätt. Första gången man skall lägg till nytt innehåller kan man förhandsgranska utan att spara. Men att när man skall redigera ett redan inlagt innehåll behöver man klicka spara innan man kan förhandsgranska texten. Innehåll måste publiceras, efter att det skapats, via admingränssnittet innan det visas på sidan. Detta gäller alla tre typerna; post, block och page. Detta görs via Innehållstabellen i administratörsgränssnittet.\r\n \r\nDet finns en makefil så att man kan generera dokumentation med phpdoc. Det finns även inlagt enhetstester med phpunit i samma omfattning som i kmom06.\r\n \r\nUnder kmom10/webpage/htdocs/sql/setup.sql finns hela upprättandet av databasen för webshopen. Där finns även ett ER-diagram samt en er.png för diagrammet för databasen.\r\n \r\n###Krav 2: Skapa kundkonto\r\nSom kund kan du skapa ett konto och via din kontolänk i navbaren få se dina uppgifter samt önskelista och orderhistorik. Här kan man även redigera delar av sina kontouppgifter, så som email, adressuppgifter, lösenord, för- och efternamn.\r\n \r\nAnvändarnamnet och emailadressen måste vara unikt mot övriga användarkonton.\r\n \r\nKonton sätts som default till ‘customer’ och den typen av konton kommer inte in i administratörsgränssnittet. Administratören kommer åt administratörsgränssnittet via sin kontosida.\r\n \r\nDet finns inlagt bland annat kunden doe med lösenord doe och administratören admin med lösenord admin.\r\n \r\nVad gäller användarkontona så kan admin i administratörsgränssnittet redigera ett användarkontos uppgifter samt växla ett konto mellan kund och admin eller att blockera kontot från att användas.\r\n \r\n###Krav 3: Sida - Produkter\r\nVarje produkt tillhör minst en kategori. När en produkt läggs till tas hjälp av boardgamegeeks databas för spelets egenskaper. Mer om det under krav 6. Varje produkt har ett artikleid som baseras på titeln med bindestreck mellan orden. Spelet ‘Axis and Allies’ får artikelid ‘art-axis-and-allies’. Skulle ett annat spel med samma titel läggas in ser en metod till att artikleid förblir unikt och lägger till siffra på de produkter med samma titel; axis-and-allies-2 exempelvis.\r\n \r\nNär man lägger in kan man välja den eventuella bild som ges av boardgamegeek eller om man lägger in en egen. Man har möjlighet att testa bilden så det ser bra ut innan man bestämmer sig. Detta kan givetvis ändras efteråt.\r\n \r\nI butiken visas mindre bilder upp tillsammans med pris, lagerstatus, Boardgamegeek-rating, lägga i kundvagn-knapp och lägga i önskelistan-knapp. Om man klickar en produkts titel eller bild kommer man till dess produktvy. Där finns beskrivning över spelet. Här ges mer omfattande information; rating, pris, kategorier, utgivningsår, antal produkter i lagret, antal spelare, rekommenderad ålder och speltid. Härifrån kan man lägga produkten i kundvagn eller i önskelistan. Det finns i både butik och produktvy länk till spelet på boardgamegeek.com.\r\n \r\nMan kan söka bland spelen via titel eller beskrivningstexterna. Sortering kan göras via radioknappar för titel, pris och boardgamegeek-rating. Det finns paginering om det skulle vara fler produkter än vad som får plats i tabellen. Antalet som skall visas samtidigt kan justeras via en select.\r\n \r\nDet krävs att man är inloggad för att kunna lägga i kundvagnen. Är inte användaren inloggad när man försöker lägga produkt i kundvagn så dirigeras man till inloggningssidan. \r\n \r\nKundvagnen kan redigeras via inputfält eller om man helt vill radera via länk i tabellen (rött kryss). Det finns information hur många varor som finns i lagret och markeras med röd text om kundvagnen innehåller fler varor än vad som finns i lagret, annars grön text som talar om antalet av den produkten som finns i lagret.\r\n \r\nEfter köp får kunden se sin order. Kunden kan även se orderhistoriken via sin kontosida. Där kan man även se fakturan för ordern.\r\n \r\nLagret ändras inte av varorna i kundvagnen utan uppdateras enbart när själva köpet görs. Då skapas även en faktura med förfallodatum 30 dagar framåt från köpdatum. Kundvagnen töms i samma veva. Det loggas även vilka köp som gjorts och i vilken kvantitet för att hålla ‘Hetast just nu’-tabellen korrekt uppdaterad på förstasidan.\r\n \r\nMan kan sätta en produkt till ‘displayed’ eller ‘notDisplayed’. Detta avgör om produkten ‘lagts ut’ och syns i butiken eller inte. Man kan även ‘radera’ en produkt. Då markeras den som raderad. Men går att ta tillbaka om man skulle ångra sig.\r\n \r\n \r\n###Krav 4: Förstasidan\r\nDet finns en förstasida som samlar nyheter, det hetaste produkterna, nya produkter i butiken, rekommenderade produkter och ett kategorimoln. \r\n \r\nDe hetaste produkterna och senast inlagda produkterna baseras på tabeller i databasen som uppdateras när produkter köpts respektive lagts in i butiken. Det är enbart produkter som satts till ‘displayed’ som kommer att synas på förstasidan.\r\n \r\nDet finns en senaste nytt lista som tar med de tre senaste nyhetsposterna och visar en lite del (50 tecken) från inlägget. Här jag har märkt att man får parera lite så att det inte bryts vid ett å, ä eller ö. Annars kommer inte teckenkodningen med. Klickar man titel kommer man till nyhetsposten.\r\n \r\nUnder denna lista finns ett kategorimoln som visar butikens kategorier där den vanligaste kategorin är större och den mer sällsynta kategorin är har mindre font-size. Dessa fungerar även som en länk, så att om man trycker på en kommer man till butiken med just den filtreringen.\r\n \r\nErbjudande och rekommendationer styr man via ett innehåll av typen block. Det finns under innehåll färdiga block med de tingade slugsen ‘erbjudande’ och ‘rekommenderade’ och i de blocken skriver man in artikelid för produkterna separerande med komma utan mellanslag. Exempelvis art-heroquest,art-pandemic,art-star-wars-rebellion, så kommer de tre spelen hamna i erbjudande- eller rekommenderadetabellen beroende på valt block.\r\n \r\n###Krav 5: Produktkategorier\r\nVarje produkt har alltid minst en kategori. Men av de inlagda spelen i setup.sql har spelen två kategorier eller fler. Man kryssar i ett spels kategorier när man lägger in en ny produkt och detta kan redigeras senare.\r\n \r\nI butiken syns kategorierna i en lista till vänster med antalet kategorier som finns med bland de spel som för tillfället finns med i sökningen eller filtreringen. Det finns även en filtrering för antalet spelar, både minsta antalet och maxantalet spelare ett spel kan ha. \r\n \r\nMan kan söka på flera filter samtidigt som då mer och mer gallrar ut spel ur butiken. När en filtrering gjorts ser man nya antalet av kategorier och antalet spelare i parenteserna för de spel som nu är kvar på skärmen . Är man exempelvis ute efter ett strategispel med fantasytema som kan spelas med 6 spelare så kan man klicka för de tre filtren (strategispel, fantasy, maxspelare 6st) för att se vilka spel som har just de egenskaperna. Finns det då fler kan man sortera dem efter boardgamegeekratingen eller pris och få ytterligare hjälp att hitta vad man söker.\r\n \r\n###Krav 6: Extra \r\n####Boardgamegeek\r\nJag har, som jag redan nämnt lite ovan, använt mig av boardgamegeeks databas för att underlätta inlägg av nya produkter, för att visa deras rating i butiken och för att kunden lätt skall kunna ta sig till sidan för just det spelet de är mer nyfikna på. Varje produkt har en länk till dess motsvarighet på boardgamegeek.com \r\n \r\nBoardgamegeek är för spel vad IMDB är för filmer. Det är moderskeppet för brädspel och den givna sidan att gå till när man söker efter information om och kring spel. Databasen innehåller ca 100 000 spel och kommer i de allra flesta fall täcka upp när man lägger in en ny produkt. Vid sökning så får man upp en lista över träffarna i databasen och vilket publiseringsår titeln har. Om man hittar den man söker kan man välja den och klicka vidare. Annars, om man inte hittar titeln för att databasen inte går att nå eller för att titeln inte finns i den, får man besked om ‘Titeln matchar inget spel i Boardgamegeeks databas’ eller så kan man välja ‘Ingen av träffarna’’ utgå från en blank start istället. \r\n \r\nBoardgamegeek ger fri tillgång till sitt innehåll för icke kommersiella syften, vilket detta i strikt mening är. Skulle det varit skarpt läge blir skillnaden att man använt egen bild och, lite beroende på texten, skrivit om beskrivningen av spelet. Men i övrigt skulle man haft fortsatt stor nytta av all information kring produkten så som antalet spelare, speltid, ålder mm. Sådant som kan tillskrivas egenskaper hos spelet. Dessutom skulle man fortfarande kunna knyta spelen till databasen för rating och direktlänk till spelet på boardgamegeek.com.\r\n \r\nMed detta som hjälp har jag haft mer tid att lägga själva webbutiken och hur den skall hantera produkter som är fyllda med detaljer och information.\r\n \r\n####Önskelista\r\nDet finns även möjlighet för användaren att bygga upp sin önskelista. Detta gör man genom att klicka på hjärtat vid produkten i butiken eller i produktvyn. Det har ju hänt att man som kund velat ha mer än man haft råd med för tillfället eller att man av annan anledning sett något intressant men inte klickat köpknappen, än. Då är det smidigt att kunna lägga produkten önskelistan, så att den finns lättillgänglig till nästa gång man kommer på besök. Önskelistan hittas sen under kontosidan och kan redigeras användaren. Önskelistan är byggs upp av två tabeller i databasen och liknar i mångt och mycket kundvagnen. Fast utan att ta hänsyn till antalet. Den begränsar så att varje produkt i önskelistan är unik.\r\n \r\n####Poäng\r\nKänns lite konstigt att resonera kring hur många poäng det är värt. Men jag gör ett försök. \r\n \r\nAv de tio poäng som kan fås för extrauppgiften tycker jag dessa två delar borde ge alla tio poäng Det är framför allt kopplingen till Boardgamegeek som är huvuddelen av de poängen. Responsen var i XML och inte i JSON. Vilket gjorde att jag fick med mig en del nytt i och med detta. Det har dessutom varit till stor hjälp vid uppbyggandet av butiken och skulle vara fortsatt bra för butikens service och funktionalitet mot kunden.\r\n \r\nÖnseklistan är en mindre del. Men att en önskelista är en funktion som passar väl in i en webbutik. Det är en funktion som ligger utöver och borde ge några poäng under krav 6.\r\n \r\n###Allmänt\r\nDet har varit ett kul och lärorikt projekt. Jag har länge lekt med tanken att ha en egen webbutik för just spel av olika slag. Så det var kul att nu få testa de nyvunna kunskaperna och försöka göra en. Det passar väl in med kursen och knyter ihop de olika momenten på ett bra sätt. Skulle sen gärna vilja veta och lära mig mer om hur man kan hantera betalningsbiten. Den lösningen chansar man sig inte fram till.\r\n \r\nSom vanligt så har det gått lite upp och ner under arbetets gång. Det fanns många stopp som gick svårare än jag hoppats. Men de stora hindren på resan visade sig bli filterna, kundvagnen och processen att ta bort från lagret vid köp. \r\n \r\nJag var från början inställd på att få till filterna och att kunna filtrera på många samtidigt. Blev inspirerad av SFbokhandelns sätt att hantera detta. Skulle gärna velat kunna filtrera även på åldersrekommendation men kände att jag fick bryta, för tidens skull. \r\nJag fick även kompromissa med kundvagnen. Den hade jag helst velat kunna fylla innan man loggar in. Jag kan själv irritera mig på sidor där jag måste skapa konto för att kunna börja handla. Helst skall man kunna checka ut utan att ens behöva skapa konto, om jag fick bestämma. \r\n \r\nJag påbörjade en sådan lösning för kravlös kundvagn. Men fick inte riktigt ihop det.  Bestämde mig därför för att göra inloggningskrav först och om tiden tillät gå tillbaka och fixa den kravlöst varianten. Men så långt kom jag tyvärr inte. Nu dirigeras du istället till inloggningssidan om du försöker lägga något i kundvagnen utan att var inloggad.\r\n \r\nNär jag skulle ta bort varor ur lagret så blev det rätt så mycket bökigare att jag tillåter att man kan ha samma vara på olika hyllor. Denna delen var en typisk sådan där jag tänker att det går snabbt, enkelt och smidigt att fixa och sen sitter jag i två dagar från och till innan jag är klar. Tror jag fick börja om tre gånger innan lösningen var på plats.\r\n \r\n###Avslutande tankar\r\nSom sagt så tycker jag det varit en bra kurs. Det har varit innehållsmässigt bra kursmoment. Det har varit väldigt mycket. Men det har också gett mycket. \r\n \r\nTycker verkligen om Gitter chatten. Den kommer oftast till ens räddning när man sitter i kläm. Likaså är hangoutsen väldigt värdefulla när inget annat hjälper. Tycker också om litteraturen Databasteknik, även om jag kan tycka de tramsar lite väl mycket kring exemplen och sådant. Men den fyller sin funktion.\r\n \r\nJag skall fundera mer kring kursen och dess innehåll delge de synpunkterna, om några dykt upp, på kursutvärderingen.\r\n \r\nDet har varit en av de mer intensiva kurserna så här långt. Det var som jag skrev i någon av redovisningarna - mina nära och kära undrar nog vart jag tagit vägen. Så blev det givetvis också under projektarbetet. \r\n \r\nProgrammering är kul. Men nu skall det bli trevligt att få lite tid över till familjen.\r\n \r\nJag skulle kunna rekommendera kursen till vänner. Betyg på kursen blir en 8. \r\n\r\n', 'block', 'markdown', 'Published', '2017-05-24 18:10:04');

SELECT * FROM content;


-- - Ger full tabellsökning utan index
EXPLAIN SELECT * FROM content WHERE title = 'block';

-- - Ger sökning på en rad efter index
CREATE INDEX index_title ON content(title);

SHOW CREATE TABLE content;





